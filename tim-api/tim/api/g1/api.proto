syntax = "proto3";

package tim.api.g1;

message SpaceUpdate {
  string id = 1;
  oneof event {
    SpaceNewMessage space_new_message = 7;
  }
}

message Message {
  string sender_id = 1;
  string content = 2;
}

message SpaceNewMessage {
  Message message = 1;
}

message SendMessageReq {
  string id = 1;
  string command = 2;
  string client_id = 3;
}

message SendMessageRes {
  string id = 1;
}

message SubscribeToSpaceReq {
  string client_id = 1;
}

service TimApi {
  rpc SendMessage(SendMessageReq) returns (SendMessageRes);
  rpc SubscribeToSpace(SubscribeToSpaceReq) returns (stream SpaceUpdate);
}
